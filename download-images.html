<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastMine - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #040307;
            color: #e8e8e8;
        }
        .container {
            background: #030303;
            border: 1px solid #424242;
            border-radius: 12px;
            padding: 40px;
        }
        h1 {
            color: #3342f3;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #b8bcc0;
            margin-bottom: 30px;
        }
        button {
            background: #3342f3;
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }
        button:hover {
            background: #4552ff;
            transform: translateY(-2px);
        }
        button:disabled {
            background: #424242;
            cursor: not-allowed;
            transform: none;
        }
        .progress {
            margin-top: 20px;
            padding: 20px;
            background: rgba(51, 66, 243, 0.1);
            border-radius: 8px;
            display: none;
        }
        .progress.active {
            display: block;
        }
        .log {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            color: #b8bcc0;
        }
        .success {
            color: #4ade80;
        }
        .error {
            color: #f87171;
        }
        .instructions {
            background: rgba(66, 66, 66, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            font-size: 14px;
            line-height: 1.8;
        }
        .instructions h3 {
            margin-top: 0;
            color: #3342f3;
        }
        .instructions ol {
            margin-left: 20px;
        }
        .instructions code {
            background: #040307;
            padding: 2px 6px;
            border-radius: 4px;
            color: #3342f3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñºÔ∏è FastMine - –ó–∞–≥—Ä—É–∑—á–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>
        <p class="subtitle">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Figma Make</p>
        
        <button id="downloadBtn" onclick="downloadAllImages()">
            üì¶ –°–∫–∞—á–∞—Ç—å –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (ZIP)
        </button>
        
        <div id="progress" class="progress">
            <div class="log" id="log"></div>
        </div>

        <div class="instructions">
            <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
            <ol>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ª–µ–Ω–¥–∏–Ω–≥ –≤ <strong>Figma Make</strong></li>
                <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã (–ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É)</li>
                <li>–ù–∞–∂–º–∏—Ç–µ <strong>F12</strong> –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è DevTools</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <strong>Console</strong></li>
                <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∏–∂–µ:</li>
            </ol>
            <textarea readonly style="width: 100%; height: 200px; background: #040307; color: #e8e8e8; border: 1px solid #424242; border-radius: 6px; padding: 12px; font-family: monospace; font-size: 13px; margin-top: 10px;">(async function() {
    const images = document.querySelectorAll('img');
    const zip = new JSZip();
    let count = 0;
    
    console.log(`üîç –ù–∞–π–¥–µ–Ω–æ ${images.length} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π`);
    
    for (let img of images) {
        try {
            const response = await fetch(img.src);
            const blob = await response.blob();
            const filename = `image_${++count}.${blob.type.split('/')[1] || 'png'}`;
            zip.file(filename, blob);
            console.log(`‚úÖ ${count}/${images.length} - ${filename}`);
        } catch (e) {
            console.log(`‚ùå –û—à–∏–±–∫–∞: ${img.src.substring(0, 50)}...`);
        }
    }
    
    console.log('üì¶ –°–æ–∑–¥–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞...');
    const content = await zip.generateAsync({type: 'blob'});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(content);
    link.download = 'fastmine-images.zip';
    link.click();
    console.log('‚úÖ –ì–æ—Ç–æ–≤–æ! –§–∞–π–ª —Å–∫–∞—á–∞–Ω.');
})();</textarea>
        </div>

        <div class="instructions" style="margin-top: 20px;">
            <h3>üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ (–¥–ª—è —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã):</h3>
            <p>–ï—Å–ª–∏ –≤—ã –æ—Ç–∫—Ä—ã–ª–∏ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ Figma Make, –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ ‚òùÔ∏è</p>
        </div>
    </div>

    <script>
        function log(message, type = 'normal') {
            const logEl = document.getElementById('log');
            const line = document.createElement('div');
            line.className = type;
            line.textContent = message;
            logEl.appendChild(line);
            logEl.scrollTop = logEl.scrollHeight;
        }

        async function downloadAllImages() {
            const btn = document.getElementById('downloadBtn');
            const progressEl = document.getElementById('progress');
            const logEl = document.getElementById('log');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...';
            progressEl.classList.add('active');
            logEl.innerHTML = '';

            try {
                // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                const images = document.querySelectorAll('img');
                log(`üîç –ù–∞–π–¥–µ–Ω–æ ${images.length} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ`);

                if (images.length === 0) {
                    log('‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ Figma Make.', 'error');
                    btn.disabled = false;
                    btn.textContent = 'üì¶ –°–∫–∞—á–∞—Ç—å –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (ZIP)';
                    return;
                }

                const zip = new JSZip();
                let successCount = 0;
                let errorCount = 0;

                for (let i = 0; i < images.length; i++) {
                    const img = images[i];
                    try {
                        log(`‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ ${i + 1}/${images.length}...`);
                        
                        // –ü–æ–ª—É—á–∞–µ–º blob –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                        const response = await fetch(img.src);
                        if (!response.ok) throw new Error('Network error');
                        
                        const blob = await response.blob();
                        const extension = blob.type.split('/')[1] || 'png';
                        const filename = `fastmine_${String(i + 1).padStart(3, '0')}.${extension}`;
                        
                        zip.file(filename, blob);
                        successCount++;
                        log(`‚úÖ ${filename} - –∑–∞–≥—Ä—É–∂–µ–Ω–æ`, 'success');
                    } catch (error) {
                        errorCount++;
                        const shortSrc = img.src.substring(0, 60) + '...';
                        log(`‚ùå –û—à–∏–±–∫–∞: ${shortSrc}`, 'error');
                    }
                }

                log(`\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:`);
                log(`‚úÖ –£—Å–ø–µ—à–Ω–æ: ${successCount}`, 'success');
                if (errorCount > 0) {
                    log(`‚ùå –û—à–∏–±–æ–∫: ${errorCount}`, 'error');
                }

                if (successCount > 0) {
                    log('\nüì¶ –°–æ–∑–¥–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞...');
                    const content = await zip.generateAsync({
                        type: 'blob',
                        compression: 'DEFLATE',
                        compressionOptions: { level: 6 }
                    });

                    log('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞...');
                    saveAs(content, 'fastmine-images.zip');
                    
                    log('\n‚úÖ –ì–æ—Ç–æ–≤–æ! –§–∞–π–ª fastmine-images.zip —Å–∫–∞—á–∞–Ω.', 'success');
                } else {
                    log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'error');
                }

            } catch (error) {
                log(`\n‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }

            btn.disabled = false;
            btn.textContent = 'üì¶ –°–∫–∞—á–∞—Ç—å –µ—â–µ —Ä–∞–∑';
        }
    </script>
</body>
</html>
